<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0">

    <title>基于 mclib 的剪切板管理器 clipboard-master | 雨宮雪乃の作業台</title>
    <style>
        * {
            cursor: url("https://iamyukino.github.io/index/wp-content/global/images/mouse.png"), auto;
        }
    </style>
    <link rel="shortcut icon" href="https://iamyukino.github.io/index/wp-content/global/images/favicon.png" type="image/png">

    <link rel="stylesheet" type="text/css" href="../../index/wp-includes/global/waifu/Samples/TypeScript/Demo/live2d/assets/waifu.css"/>
    <script type="text/javascript" src="../../index/wp-includes/index/js/jquery.min.js"></script>
    <script src="../../index/wp-includes/global/waifu/Samples/TypeScript/Demo/live2d/assets/html2canvas.js"></script>

    <link rel="stylesheet" type="text/css" href="../../index/wp-includes/work/css/logo.css">
    <link rel="stylesheet" type="text/css" href="../../index/wp-includes/work/fonts/logo/logo.css">
    <link rel="stylesheet" id="saukra_css-css" href="../../index/wp-includes/work/css/style.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../index/wp-includes/work/css/lib.min.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../index/wp-includes/work/css/font.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../index/wp-includes/work/css/insight.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../index/wp-includes/work/css/jquery.fancybox.min.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../index/wp-includes/work/css/zoom.css" type="text/css" media="all">
    <style>
        .emoji-coda {
            display: inline-block!important;
            position: relative;
            width: 45px;
            top: 2px;
            margin: -3px 3px!important;
            padding: 0
        }
    </style>

    <link rel="stylesheet" type="text/css" href="../../index/wp-includes/work/css/sharejs.css">
    <script type="text/javascript" src="../../index/wp-includes/work/js/Valine.min.js"></script>

    <script>
        var mashiro_option = new Object
            , mashiro_global = new Object
            , bg =
                ( "../../index/wp-content/work/images/cover/0.webp,"
                + "../../index/wp-content/work/images/cover/1.webp,"
                + "../../index/wp-content/work/images/cover/2.webp,"
                + "../../index/wp-content/work/images/cover/3.webp,"
                + "../../index/wp-content/work/images/cover/4.webp,"
                + "../../index/wp-content/work/images/cover/5.webp,"
                + "../../index/wp-content/work/images/cover/6.webp,"
                + "../../index/wp-content/work/images/cover/7.webp,"
                + "../../index/wp-content/work/images/cover/8.webp,"
                + "../../index/wp-content/work/images/cover/9.webp,"
                + "../../index/wp-content/work/images/cover/10.webp,"
                + "../../index/wp-content/work/images/cover/11.webp,"
                + "../../index/wp-content/work/images/cover/12.webp,"
                + "../../index/wp-content/work/images/cover/13.webp,"
                + "../../index/wp-content/work/images/cover/14.webp,"
                + "../../index/wp-content/work/images/cover/15.webp,"
                + "../../index/wp-content/work/images/cover/16.webp"). split(",")
            , bgindex = Math.floor(Math.random() * bg.length);

            mashiro_option.NProgressON = !0,
            mashiro_option.email_domain = "iamyukino.github.io",
            mashiro_option.email_name = "me",
            mashiro_option.cookie_version_control = "",
            mashiro_option.qzone_autocomplete = !1,
            mashiro_option.site_name = "雨宮雪乃のサイト",
            mashiro_option.author_name = "雨宮雪乃",
            mashiro_option.site_url = "https://iamyukino.github.io/work/posts/202311301415.html",
            mashiro_option.v_appId = "Hr0x4YCmviK0H7WMFGDa2bbb-gzGzoHsz",
            mashiro_option.v_visitor = true,
            mashiro_option.v_appKey = "Woqnw7ir7fohwvS8uk0MKDMP",
            mashiro_option.v_serverURLs = "https://hr0x4ycm.lc-cn-n1-shared.com",
            mashiro_option.mathjax = "0"
    </script>
    <style type="text/css">
        .hljs-ln {
            border-collapse: collapse
        }
        .hljs-ln td {
            padding: 0
        }
        .hljs-ln-n:before {
            content: attr(data-line-number)
        }
    </style>
    <style type="text/css">
        .site-top .lower nav {
            display: block!important
        }
        #pagination a:hover,.author-profile i,.float-content i:hover,.post-content a:hover,.post-like a,.post-more i:hover,.post-share .show-share,.sub-text,.we-info a,span.sitename {
            color: #ff82ab
        }
        .ar-time i,.comment .comment-reply-link,.download,.feature i,.links ul li:before,.navigator i:hover,.object,.siren-checkbox-radio:checked+.siren-checkbox-radioInput:after,span.ar-circle {
            background: #ff82ab
        }
        ::-webkit-scrollbar-thumb {
            background: #ff82ab
        }
        #pagination a:hover,.comment-respond input[type=submit]:hover,.download,.link-title,.links ul li:hover,.navigator i:hover {
            border-color: #ff82ab
        }
        #archives-temp h3,#comments-navi a.next,#comments-navi a.prev,.comment h4 a,.comment h4 a:hover,.comment-respond input[type=submit]:hover,.entry-content a:hover,.entry-title a:hover,.site-info a:hover,.site-title a:hover,.site-top ul li a:hover,.sorry li a:hover,i.iconfont.js-toggle-search.iconsearch:hover,span.page-numbers.current {
            color: #ff82ab
        }
        .comments .comments-main {
            display: block!important
        }
        .comments .comments-hidden {
            display: none!important
        }
    </style>
    <meta name="generator" content="Hexo 5.2.0">
</head>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
    <div class="skin-menu no-select" id="mainskin" style="position:fixed;bottom:65px;right:52px">
        <div class="theme-controls row-container">
            <p style="text-align:center;font-family:Monaco;font-weight:700;color:#444">
                <i style="color:grey" class="fa fa-chevron-left"></i>
                background <i style="color:grey" class="fa fa-chevron-right"></i>
            </p>
            <ul class="menu-list">
                <li id="white-bg">
                    <i class="fa fa-television" aria-hidden="true"></i>
                </li>
                <li id="bing-bg">
                    <i class="iconfont icon-pixiv"></i>
                </li>
                <li id="dark-bg">
                    <i class="fa fa-moon-o" aria-hidden="true"></i>
                </li>
            </ul>
        </div>
        <hr>
        <p style="text-align:center;font-family:Monaco;font-weight:700;color:#444">
            <i style="color:grey" class="fa fa-chevron-left"></i>
            font <i style="color:grey" class="fa fa-chevron-right"></i>
        </p>
        <div class="font-family-controls row-container">
            <button type="button" class="control-btn-serif" data-mode="serif" onclick="mashiro_global.font_control.change_font()">Serif</button>
            <button type="button" class="control-btn-sans-serif" data-mode="sans-serif" onclick="mashiro_global.font_control.change_font()">Sans Serif</button>
        </div>
        <hr>
        <p style="text-align:center;font-family:Monaco;font-weight:700;color:#444">
            <i style="color:grey" class="fa fa-chevron-left"></i>
            script <i style="color:grey" class="fa fa-chevron-right"></i>
        </p>
        <div class="theme-controls row-container">
            <ul class="menu-list">
                <li id="empty-effect">
                    <i class="fa fa-ban"></i>
                </li>
                <li id="sakura-rain-effect">
                    <i class="iconfont icon-sakura"></i>
                </li>
                <li id="snowy-effect">
                    <i class="fa fa-snowflake-o"></i>
                </li>
                <li id="lines-effect">
                    <i class="fa fa-chevron-left"></i>
                </li>
                <li id="colorful-belts-effect">
                    <i class="fa fa-map"></i>
                </li>
                <li id="words-rain-effect">
                    <i class="fa fa-font"></i>
                </li>
                <li id="point-rain-effect">
                    <i class="iconfont icon-dots"></i>
                </li>
                <li id="rain-drop-effect">
                    <i class="fa fa-tint"></i>
                </li>
            </ul>
        </div>
        <canvas id="night-mode-cover"></canvas>
    </div>
    <div class="changeSkin-gear no-select" style="background:rgba(0,0,0,0) none repeat scroll 0 0;visibility:visible;bottom:0">
        <div class="keys" id="setbtn">
            <button id="open-skinMenu">
                <style>
                    button#open-skinMenu {
                        transition: all .2s linear 0s;
                        outline: 0;
                        position: fixed;
                        bottom: 13px;
                        right: 40px;
                        font-size: 16px;
                        background-color: rgba(255,255,255,.95);
                        border-radius: 20px;
                        box-shadow: 0 3px 8px 0 rgba(0,0,0,.1),0 3px 8px 0 rgba(0,0,0,.1)
                    }

                    button#open-skinMenu:hover {
                        transition: all .2s linear 0s;
                        background-color: #ff82ab;
                        color: rgba(255,255,255)
                    }
                </style>
                <i class="iconfont icon-gear inline-block rotating"></i>
                SCHEME TOOL | 主题工具
            </button>
        </div>
    </div>
    <div class="scrollbar" id="bar"></div>
    <a href="#" class="cd-top faa-float animated"></a>
    <section id="main-container">
        <div class="headertop filter-dot">
            <div id="banner_wave_1"></div>
            <div id="banner_wave_2"></div>
            <figure id="centerbg" class="centerbg">
                <div class="focusinfo no-select">
                    <!-- HELLO WORLD -->
                </div>
            </figure>
            <div id="video-container">
                <video style="object-fit:fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto"></video>
                <div id="video-btn" class="loadvideo videolive"></div>
                <div id="video-add"></div>
                <div class="video-stu"></div>
            </div>
            <div class="headertop-down faa-float animated" onclick="headertop_down()">
                <span>
                    <i class="fa fa-chevron-down" aria-hidden="true"></i>
                </span>
            </div>
        </div>
        <div id="page" class="site wrapper">
            <header class="site-header no-select gizle sabit" role="banner">
                <div class="site-top">
                    <div class="site-branding">
                        <span class="site-title">
                            <span class="logolink logo">
                                <a href="https://iamyukino.github.io/work">
                                    <ruby>
                                        <span class="sakuraso">雨宮雪乃</span>
                                        <span class="no">の</span>
                                        <span class="shironeko">作業台</span>
                                        <rp></rp>
                                        <rt class="logo">花寄一生推</rt>
                                        <rp></rp>
                                    </ruby>
                                </a>
                            </span>
                        </span>
                    </div>
                    <div class="searchbox search-form-submit">
                        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
                    </div>
                    <div id="show-nav" class="showNav mobile-fit">
                        <div class="line line1"></div>
                        <div class="line line2"></div>
                        <div class="line line3"></div>
                    </div>
                    <div class="lower-cantiner">
                        <div class="lower">
                            <nav class="mobile-fit-control hide">
                                <ul id="menu-new" class="menu">
                                    <li>
                                        <a href="https://iamyukino.github.io/">
                                            <span class="faa-parent animated-hover">
                                                <i class="fa fa-home faa-shake" aria-hidden="true"></i>
                                                主站
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://iamyukino.github.io/work">
                                            <span class="faa-parent animated-hover">
                                                <i class="fa fa-list-ul faa-vertical" aria-hidden="true"></i>
                                                首页
                                            </span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="https://iamyukino.github.io/work/archives">
                                            <span class="faa-parent animated-hover">
                                                <i class="fa fa-archive faa-shake" aria-hidden="true"></i>
                                                归档
                                            </span>
                                        </a>
                                        <ul class="sub-menu">
                                            <li>
                                                <a href="https://iamyukino.github.io/work/categories/tool">
                                                    <i class="fa fa-codepen" aria-hidden="true"></i>
                                                    工具
                                                </a>
                                            </li>
                                            <li>
                                                <a href="https://iamyukino.github.io/work/categories/misc">
                                                    <i class="fa fa-comment-o" aria-hidden="true"></i>
                                                    教程
                                                </a>
                                            </li>
                                            <li>
                                                <a href="https://iamyukino.github.io/work/categories/essay">
                                                    <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                                                    随笔
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href=javascript:;>
                                            <span class="faa-parent animated-hover">
                                                <i class="fa fa-gamepad faa-shake" aria-hidden="true"></i>
                                                游戏
                                            </span>
                                        </a>
                                        <ul class="sub-menu">
                                            <li>
                                                <a href="https://iamyukino.github.io/work/game/chat-noir">
                                                    <i class="fa fa-music" aria-hidden="true"></i>
                                                    猫捕
                                                </a>
                                            </li>
                                            <li>
                                                <a href="https://iamyukino.github.io/work/game/leaves-in-wind">
                                                    <i class="fa fa-music" aria-hidden="true"></i>
                                                    風切
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="https://iamyukino.github.io/work/comment">
                                            <span class="faa-parent animated-hover">
                                                <i class="fa fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                                                留言板
                                            </span>
                                        </a>
                                    </li>
                                </ul> 
                            </nav>
                        </div>
                    </div>
                </div>
            </header>
            <link rel="stylesheet" type="text/css" href="../../index/wp-includes/work/css/sharejs.css">
            <link rel="stylesheet" href="../../index/wp-includes/work/css/tocbot.css">
            <div class="pattern-center-blank"></div>
            <div class="pattern-center single-center">
                <div class="pattern-attachment-img lazyload" style="background-image:url(../../index/wp-content/work/images/post/202311301415.webp)" src="../../index/wp-content/work/images/global/lazyload1.webp" data-src="../../index/wp-content/work/images/post/202311301415.webp"></div>
                <header class="pattern-header single-header" style="text-shadow:0 0 7px #000,0 0 7px #000">
                    <h1 class="entry-title">基于 mclib 的剪切板管理器 clipboard-master</h1>
                    <p class="entry-census">
                        <span>
                            <a href="https://github.com/iamyukino" target="_blank">
                                <img src="../../index/wp-content/work/images/global/avatar.png">
                            </a>
                        </span>
                        <span>
                            <a href="https://github.com/iamyukino" target="_blank">雨宮雪乃</a>
                        </span>
                        <span class="bull">·</span>
                        2023-11-30<span class="bull">·</span>
                        
                        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
                        <span id="busuanzi_container_page_pv">
                            <span id="busuanzi_value_page_pv"></span>
                            次阅读
                        </span>
                        <!--span id="https://iamyukino.github.io/work/posts/202311301415.html" class="leancloud_visitors" data-flag-title="Python 元组 在 C++ 中的简易实现">
                            <a class="leancloud-visitors-count">加载中···</a>
                            <a class="post-meta-item-text">次阅读</a>
                        </span-->
                        
                        <span class="bull"></span>
                        <span class="post-count">本文共计：3709字</span>
                    </p>
                </header>
            </div>
            <div id="content" class="site-content">
                <div id="primary" class="content-area">
                    <main id="main" class="site-main" role="main">
                        <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
                            <div class="toc"></div>
                            <div class="entry-content">
                                <h2 id="项目简介"><a href="#项目简介" class="headerlink" title="项目简介"></a>项目简介</h2><p>这是一个复刻了小艺输入法剪切板功能的简易剪切板管理系统，解决了在 Win11 中难以查看剪切板历史记录的问题。项目围绕 C语言大作业 要求的 “增、删、改、查” 四个功能展开，依次实现。<br>编译环境：MSVC/GCC + <a href="https://github.com/iamyukino/mclib" target="_blank" rel="noopener">mclib</a> + Win2000 + C++11</p>
                      <h2 id="程序简介"><a href="#程序简介" class="headerlink" title="程序简介"></a>程序简介</h2><p><strong>运行截图</strong><br><img src="./202311301415/2806786-20231130141524480-1358152933.jpg" alt="image"><br><strong>使用方法</strong><br>用户 (通过右键或快捷键等方式) 复制的内容将自动记录到程序中。用户可以通过将光标移动指定位置，并单击需要粘贴的内容，来完成粘贴。每条剪切板记录右侧两个按钮 “Mod” “X” 提供修改和删除功能。通过单击顶部标题栏下方两个按钮 “搜索” “清空” 使用查询和清空功能。<br><strong>实现细节</strong><br>在数据结构上，项目选择了内存管理优化过的链式循环队列。在查询方面，一开始选择了关键词提取匹配算法，但由于较为复杂编写难度大，改为使用最长公共子串模板。在 GUI 方面，使用了自己独立开发的图形库 <a href="https://github.com/iamyukino/mclib" target="_blank" rel="noopener">mclib</a>，由于是自己造的轮子，对实现细节较为熟悉，遇到问题能够快速定位解决。</p>
                      <h2 id="完善和优化"><a href="#完善和优化" class="headerlink" title="完善和优化"></a>完善和优化</h2><p>此选题目的和初衷是为了更方便地进行复制和粘贴。<br>程序使用 Github 进行版本控制，并邀请了几位同学参与测试，提出了一些建议，例举部分如下：</p>
                      <ol>
                      <li>原本软件的粘贴功能通过更新剪切板实现，但部分网址（例如：头歌等）禁止使用复制和粘贴功能。<br>解决方案：通过改用 SendInput 模拟发送按键。</li>
                      <li>剪切板要修改已经复制好的内容，给出的修改框太小了，有时候不能把内容显示完全。<br>解决方案：输入框独立弹出，并支持改变窗口大小。</li>
                      <li>已经复制的内容，如果下一次只复制其中一部分没办法实现，只能通过复制修改框内的内容，较为繁琐。<br>解决方案：有待进一步实现。</li>
                      <li>… …</li>
                      </ol>
                      <h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><p>main.cpp</p>
                      <pre class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" design="by hojun"><code class="C++11 hljs" data-rel="C++" id="hljs-0"><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">/* main.cpp */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"afx.h"</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    afx::startup(<span class="hljs-string">"剪切板管理系统"</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        afx::peekmsg();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        afx::print();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">}</div></td></tr></tbody></table></code><a class="copy-code" href="javascript:" data-clipboard-target="#hljs-0" title="拷贝代码"><i class="fa fa-clipboard" aria-hidden="true"></i></a></pre>
                      <p>afx.h</p>
                      <pre class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" design="by hojun"><code class="C++11 hljs" data-rel="C++" id="hljs-1"><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">/* afx.h */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"mclib/src/mclib.h"</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> mcl;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">namespace</span> afx {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">/* gui */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">startup</span><span class="hljs-params">(<span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span>* caption)</span></span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">peekmsg</span><span class="hljs-params">()</span></span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span><span class="hljs-params">()</span></span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">print_box</span><span class="hljs-params">(<span class="hljs-keyword">point1d_t</span> y, <span class="hljs-built_in">string</span> str, <span class="hljs-keyword">bool</span> isnearest)</span></span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">print_title</span><span class="hljs-params">()</span></span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">algo_lwst</span><span class="hljs-params">(wstring&amp; a, wstring b)</span></span>; <span class="hljs-comment">/* lg common substr */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">paste</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::wstring&amp; str)</span></span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">enum</span> :<span class="hljs-keyword">int</span> { TW = <span class="hljs-number">7</span> };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">/* data-structure */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">sys_t</span> {</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">public</span>:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">/* linked-queue node */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">lqnode_t</span> {</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">public</span>:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="24"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-built_in">string</span> data;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="25"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">lqnode_t</span>* next = <span class="hljs-literal">nullptr</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="26"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="27"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">public</span>:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="28"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">sys_t</span>(); <span class="hljs-comment">/* create head node */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="29"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ~<span class="hljs-keyword">sys_t</span>(); <span class="hljs-comment">/* release lkqueue */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="30"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">push</span> <span class="hljs-params">(<span class="hljs-built_in">string</span> rhs)</span></span>; <span class="hljs-comment">/* add node */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="31"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pop_next</span><span class="hljs-params">(<span class="hljs-keyword">lqnode_t</span>*&amp; rhs)</span></span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="32"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">public</span>:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="33"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> MX = <span class="hljs-number">32</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="34"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> _len = <span class="hljs-number">0</span>; <span class="hljs-comment">/* length */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="35"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">lqnode_t</span>* _r = <span class="hljs-number">0</span>; <span class="hljs-comment">/* rear */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="36"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">lqnode_t</span>* _f = <span class="hljs-number">0</span>; <span class="hljs-comment">/* front */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="37"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">public</span>:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="38"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">void</span>* hwndfc = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="39"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">public</span>:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="40"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">lqnode_t</span>** _pointdelete = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="41"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">lqnode_t</span>** _pointed = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="42"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">lqnode_t</span>** _pointmodify = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="43"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">lqnode_t</span>** _pointnearest = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="44"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">point1d_t</span> sw = ((TW &lt;&lt; <span class="hljs-number">2</span>) + TW);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="45"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">point1d_t</span> sx = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="46"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">point1d_t</span> sy = (TW &lt;&lt; <span class="hljs-number">1</span>) + TW;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="47"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">bool</span> b_inempty = <span class="hljs-literal">false</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="48"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">bool</span> b_insearch = <span class="hljs-literal">false</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="49"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">char</span> : <span class="hljs-number">8</span>; <span class="hljs-keyword">char</span> : <span class="hljs-number">8</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="50"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="51"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">extern</span> <span class="hljs-keyword">sys_t</span> sys;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="52"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">}</div></td></tr></tbody></table></code><a class="copy-code" href="javascript:" data-clipboard-target="#hljs-1" title="拷贝代码"><i class="fa fa-clipboard" aria-hidden="true"></i></a></pre>
                      <p>afx.cpp</p>
                      <pre class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" design="by hojun"><code class="C++11 hljs" data-rel="C++" id="hljs-2"><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">/* afx.cpp */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"afx.h"</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"inputbox.h"</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"mclib/cpp/mcl_base.h"</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cmath&gt;</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> <span class="hljs-meta-keyword">warning</span>(disable: 5039 4996)</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> WIN32_LEAN_AND_MEAN</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;windows.h&gt;</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta">#<span class="hljs-meta-keyword">undef</span> WIN32_LEAN_AND_MEAN</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">namespace</span> afx {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">sys_t</span> sys;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">sys_t</span>::<span class="hljs-keyword">sys_t</span>() </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">      : _r (<span class="hljs-keyword">new</span> (<span class="hljs-built_in">std</span>::nothrow) <span class="hljs-keyword">lqnode_t</span>()) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (!_r) <span class="hljs-keyword">return</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _f = _r;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _r -&gt; next = <span class="hljs-literal">nullptr</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        FILE* fp = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        fp = fopen(<span class="hljs-string">".bin"</span>, <span class="hljs-string">"r"</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (!fp) <span class="hljs-keyword">return</span> ;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="24"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="25"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-built_in">string</span> s; <span class="hljs-keyword">int</span> c;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="26"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">while</span> (~(c = fgetc(fp))) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="27"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (!c) push(s), s.clear();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="28"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> s.push_back(<span class="hljs-keyword">char</span>(c));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="29"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="30"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        fclose(fp);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="31"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="32"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">sys_t</span>::~<span class="hljs-keyword">sys_t</span>() {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="33"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        FILE* fp = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="34"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        fp = fopen (<span class="hljs-string">".bin"</span>, <span class="hljs-string">"w"</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="35"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="36"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">/* Thanks to @djw for submitting this issue! Corrected. */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="37"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">while</span> (_f) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="38"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r = _f;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="39"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _f = _f -&gt; next;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="40"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">delete</span> _r;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="41"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (_len &amp;&amp; fp) <span class="hljs-built_in">fputs</span>(_f-&gt;data.c_str(), fp), fputc(<span class="hljs-number">0</span>, fp), --_len;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="42"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="43"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="44"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (fp) fclose(fp);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="45"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _f = <span class="hljs-literal">nullptr</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="46"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="47"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">sys_t</span>::push(<span class="hljs-built_in">string</span> rhs) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="48"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (!_f) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="49"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (_len == MX) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="50"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">/* linkedqueue is full of msg */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="51"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">lqnode_t</span>* t = _f -&gt; next -&gt; next;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="52"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _f -&gt; next -&gt; next = _r -&gt; next;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="53"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r -&gt; next = _f -&gt; next;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="54"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r = _r -&gt; next;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="55"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _f -&gt; next = t;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="56"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="57"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r -&gt; next = <span class="hljs-literal">nullptr</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="58"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r -&gt; data = rhs;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="59"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="60"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="61"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (!_r -&gt; next) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="62"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">/* never got enough length */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="63"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">lqnode_t</span>* node = <span class="hljs-keyword">new</span> (<span class="hljs-built_in">std</span>::nothrow) <span class="hljs-keyword">lqnode_t</span>();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="64"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (!node)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="65"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="66"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="67"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            ++ _len;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="68"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r -&gt; next = node;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="69"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r = node;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="70"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="71"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r -&gt; next = <span class="hljs-literal">nullptr</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="72"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r -&gt; data = rhs;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="73"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="74"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="75"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">/* has got enough length */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="76"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ++ _len;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="77"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _r = _r -&gt; next;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="78"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="79"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _r -&gt; data = rhs;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="80"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="81"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="82"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">void</span> <span class="hljs-keyword">sys_t</span>::</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="83"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    pop_next (<span class="hljs-keyword">lqnode_t</span>*&amp; rhs){</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="84"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        -- _len;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="85"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (rhs -&gt; next == _r) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="86"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            _r = rhs;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="87"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">return</span> ;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="88"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="89"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">lqnode_t</span>* t = rhs -&gt; next -&gt; next;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="90"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        rhs -&gt; next -&gt; next = _r -&gt; next;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="91"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _r -&gt; next = rhs -&gt; next;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="92"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        rhs -&gt; next = t;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="93"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="94"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="95"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">/* init window */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="96"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">startup</span><span class="hljs-params">(<span class="hljs-keyword">char</span> <span class="hljs-keyword">const</span>* caption)</span> </span>{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="97"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        key.set_repeat(<span class="hljs-literal">true</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="98"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">auto</span> size = display.get_desktop_size();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="99"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.set_mode({ size.x / <span class="hljs-number">5</span>, size.y / <span class="hljs-number">5</span> }, dflags.Resizable | dflags.DoubleBuf | dflags.AlphaWindow);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="100"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.set_window_pos({ size.x - (size.x / <span class="hljs-number">4</span>), size.y - (size.y / <span class="hljs-number">3</span>) }, <span class="hljs-literal">true</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="101"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.set_caption(caption);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="102"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (!display) <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="103"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().set_alpha(<span class="hljs-number">198</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="104"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.flip();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="105"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().set_alpha(<span class="hljs-number">198</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="106"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="107"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">/* peek msg loop */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="108"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">peekmsg</span><span class="hljs-params">()</span> </span>{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="109"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">static</span> <span class="hljs-keyword">tclock_t</span> ck;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="110"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-built_in">string</span> str;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="111"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ck.tick();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="112"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        HWND hwnd = ::GetForegroundWindow();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="113"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (hwnd != display.get_wm_info()[<span class="hljs-string">"window"</span>])</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="114"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            sys.hwndfc = hwnd;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="115"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; ev : event.get()) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="116"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">switch</span> (ev.type) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="117"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">case</span> event.Quit: <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="118"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">case</span> event.ClipboardUpdate: {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="119"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                str = event.get_details_clipboard_a();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="120"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (str.size())</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="121"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    sys.push(str);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="122"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="123"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="124"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">case</span> event.MouseWheel: {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="125"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (ev.wheel.delta.y &lt; <span class="hljs-number">0</span>) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="126"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">point1d_t</span> ssm = sys.sw * sys._len - min(display.get_window_size().y - sys.sy - TW, sys.sw * sys._len);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="127"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (sys.sx + TW &lt;= ssm) sys.sx += TW;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="128"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">else</span> sys.sx = ssm;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="129"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="130"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">else</span> {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="131"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (sys.sx - TW &gt;= <span class="hljs-number">0</span>) sys.sx -= TW;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="132"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">else</span> sys.sx = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="133"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="134"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="135"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="136"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">case</span> event.KeyDown: {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="137"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (ev.key.key == key.VkDown) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="138"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">point1d_t</span> ssm = sys.sw * sys._len - min(display.get_window_size().y - sys.sy, sys.sw * sys._len);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="139"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (sys.sx + TW &lt;= ssm) sys.sx += TW;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="140"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">else</span> sys.sx = ssm;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="141"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="142"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (ev.key.key == key.VkUp) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="143"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (sys.sx - TW &gt;= <span class="hljs-number">0</span>) sys.sx -= TW;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="144"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">else</span> sys.sx = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="145"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="146"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="147"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="148"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">case</span> event.MouseButtonUp: {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="149"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (ev.mouse.button != mouse.BtnLButton) <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="150"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">rect_t</span> rc = display.get_window_rect();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="151"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="152"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (afx::sys.b_inempty) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="153"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    sys._r = sys._f;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="154"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    sys._len = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="155"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    sys._pointdelete = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="156"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    sys._pointed = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="157"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    sys._pointmodify = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="158"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    sys._pointnearest = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="159"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="160"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (afx::sys.b_insearch) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="161"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (!sys._len) <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="162"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-built_in">string</span> lhs = input_box(<span class="hljs-number">0</span>, <span class="hljs-keyword">const_cast</span>&lt;TCHAR*&gt;(_T(<span class="hljs-string">"查找（匹配相似度最高的元素）"</span>)), <span class="hljs-number">0</span>, rc.x, rc.y);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="163"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    mcl::mcl_simpletls_ns::<span class="hljs-keyword">mcl_m2w_str_t</span> wlhs(lhs.c_str());</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="164"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    wstring lwlhs = (<span class="hljs-keyword">wchar_t</span>*)(wlhs);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="165"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (!lhs.size()) <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="166"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">double</span> maxn = <span class="hljs-number">-1</span>, n = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="167"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="168"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">auto</span>** mint = &amp;afx::sys._f;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="169"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>** it = &amp;afx::sys._f; *it != afx::sys._r; it = &amp;(*it)-&gt;next, j++){</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="170"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                        mcl::mcl_simpletls_ns::<span class="hljs-keyword">mcl_m2w_str_t</span> wrhs((*it)-&gt;next-&gt;data.c_str());</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="171"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                        n = algo_lwst(lwlhs, wstring((<span class="hljs-keyword">wchar_t</span>*)wrhs));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="172"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                        <span class="hljs-keyword">if</span> (n &gt;= maxn) maxn = n, mint = it, i = j;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="173"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="174"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (maxn &lt; <span class="hljs-number">1</span>) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="175"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                        MessageBoxCentered(<span class="hljs-literal">NULL</span>, _T(<span class="hljs-string">"什么都没有找到 QAQ\n真的，一个字都没有..."</span>), _T(<span class="hljs-string">"查找（匹配相似度最高的元素）"</span>), MB_OK);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="176"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                        <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="177"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="178"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    sys._pointnearest = mint;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="179"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">point1d_t</span> y = sys.sy + (sys._len - i - <span class="hljs-number">1</span>) * sys.sw - sys.sx;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="180"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">point2d_t</span> sz = display.get_window_size();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="181"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">rect_t</span> boxrc_out = { TW, y, rc.x - TW - TW, (TW &lt;&lt; <span class="hljs-number">2</span>) + <span class="hljs-number">4</span> };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="182"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">rect_t</span> boxrc_in = { boxrc_out.x + <span class="hljs-number">1</span>, boxrc_out.y + <span class="hljs-number">1</span>, boxrc_out.w - <span class="hljs-number">2</span>, boxrc_out.h - <span class="hljs-number">2</span> };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="183"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    rc = {<span class="hljs-number">0</span>, sys.sy, sz.x, sz.y};</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="184"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (boxrc_in.x &lt; rc.x || boxrc_in.y &lt; rc.y || boxrc_in.x + boxrc_in.w &gt; rc.x + rc.w || boxrc_in.y + boxrc_in.h &gt; rc.y + rc.h) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="185"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                        sys.sx = (sys._len - i - <span class="hljs-number">1</span>) * afx::sys.sw;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="186"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                        <span class="hljs-keyword">point1d_t</span> ssm = sys.sw * sys._len - min(display.get_window_size().y - sys.sy, sys.sw * sys._len);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="187"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                        <span class="hljs-keyword">if</span> (sys.sx &gt; ssm) sys.sx = ssm;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="188"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="189"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="190"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sys._pointdelete) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="191"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (sys._pointed == sys._pointdelete) sys._pointed = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="192"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (sys._pointmodify == sys._pointdelete) sys._pointmodify = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="193"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (sys._pointnearest == sys._pointdelete) sys._pointnearest = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="194"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    sys.pop_next(*sys._pointdelete);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="195"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="196"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sys._pointmodify) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="197"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">char</span>* p = input_box(<span class="hljs-number">0</span>, <span class="hljs-keyword">const_cast</span>&lt;TCHAR*&gt;(_T(<span class="hljs-string">"修改（更改指定的元素）"</span>)), <span class="hljs-keyword">const_cast</span>&lt;<span class="hljs-keyword">char</span>*&gt;((*sys._pointmodify)-&gt;next-&gt;data.c_str()), rc.x, rc.y);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="198"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">if</span> (p[<span class="hljs-number">0</span>]) (*sys._pointmodify) -&gt; next -&gt; data = p;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="199"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="200"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="201"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="202"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">case</span> event.MouseButtonDown: {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="203"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">               <span class="hljs-keyword">if</span> (sys._pointed) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="204"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                   <span class="hljs-keyword">if</span> (sys.hwndfc) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="205"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                       ::SwitchToThisWindow(HWND(sys.hwndfc), TRUE);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="206"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                       mcl::mcl_simpletls_ns::<span class="hljs-keyword">mcl_m2w_str_t</span> ws((*sys._pointed)-&gt;next-&gt;data.c_str());</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="207"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                       wstring ws2 = <span class="hljs-keyword">static_cast</span>&lt;<span class="hljs-keyword">wchar_t</span>*&gt;(ws);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="208"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                       paste(ws2);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="209"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                       <span class="hljs-comment">/* for (wchar_t c : ws2) */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="210"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                       <span class="hljs-comment">/*     ::PostMessage(HWND(sys.hwndfc), WM_IME_CHAR, c, 0); */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="211"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                   }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="212"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">               }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="213"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">               <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="214"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="215"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="216"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="217"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="218"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span><span class="hljs-params">()</span> </span>{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="219"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().fill(rgba(<span class="hljs-number">255</span>, <span class="hljs-number">222</span>, <span class="hljs-number">222</span>, <span class="hljs-number">50</span>));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="220"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>, ret = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="221"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (afx::sys._len) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="222"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>** it = &amp;afx::sys._f; *it != afx::sys._r; it = &amp;(*it)-&gt;next, ++i) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="223"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                ret = afx::print_box(afx::sys.sy + (afx::sys._len - i - <span class="hljs-number">1</span>) * afx::sys.sw - afx::sys.sx, (*it)-&gt;next-&gt;data.c_str(), it == sys._pointnearest);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="224"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (sys._pointdelete &amp;&amp; (*it)-&gt; next == (*sys._pointdelete) -&gt; next &amp;&amp; ret != <span class="hljs-number">2</span>) sys._pointdelete = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="225"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">2</span>) sys._pointdelete = it;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="226"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (sys._pointed == it &amp;&amp; ret != <span class="hljs-number">1</span>) sys._pointed = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="227"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">1</span>) sys._pointed = it;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="228"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (sys._pointmodify == it &amp;&amp; ret != <span class="hljs-number">3</span>) sys._pointmodify = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="229"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">3</span>) sys._pointmodify = it;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="230"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="231"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="232"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ret = afx::print_title();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="233"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        afx::sys.b_inempty = ret == <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="234"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        afx::sys.b_insearch = ret == <span class="hljs-number">2</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="235"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.flip();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="236"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="237"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="238"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">print_box</span> <span class="hljs-params">(<span class="hljs-keyword">point1d_t</span> y, <span class="hljs-built_in">string</span> str, <span class="hljs-keyword">bool</span> isnearest)</span> </span>{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="239"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">point2d_t</span> wndsz = display.get_window_size();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="240"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">point2d_t</span> ms = mouse.get_pos();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="241"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">rect_t</span> boxrc_out = { TW, y, wndsz.x - TW - TW, (TW &lt;&lt; <span class="hljs-number">2</span>) + <span class="hljs-number">4</span> };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="242"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">rect_t</span> boxrc_in = { boxrc_out.x + <span class="hljs-number">1</span>, boxrc_out.y + <span class="hljs-number">1</span>, boxrc_out.w - <span class="hljs-number">2</span>, boxrc_out.h - <span class="hljs-number">2</span> };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="243"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">rect_t</span> boxrc = { boxrc_in.x + (TW &gt;&gt; <span class="hljs-number">1</span>), boxrc_in.y + <span class="hljs-number">1</span>, boxrc_in.w - (TW &gt;&gt; <span class="hljs-number">1</span>), boxrc_in.h - <span class="hljs-number">2</span>};</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="244"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> maxl = boxrc.w / TW;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="245"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="246"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">rect_t</span> rc = boxrc_in;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="247"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> ret = (ms.x &gt;= rc.x &amp;&amp; ms.y &gt; rc.y &amp;&amp; ms.x &lt;= rc.x + rc.w &amp;&amp; ms.y &lt;= rc.y + rc.h) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="248"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="249"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().fill(rgba(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">66</span>, <span class="hljs-number">66</span>), boxrc_out, blend.Alpha_rgba);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="250"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().fill(ret ? (isnearest ? orange : rgba(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">66</span>, <span class="hljs-number">66</span>)) : (isnearest ? rgba(<span class="hljs-number">255</span>, <span class="hljs-number">66</span>, <span class="hljs-number">66</span>, <span class="hljs-number">255</span>) : rgba(<span class="hljs-number">255</span>, <span class="hljs-number">181</span>, <span class="hljs-number">181</span>, <span class="hljs-number">255</span>)), boxrc_in, blend.Alpha_rgba);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="251"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="252"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-built_in">string</span> ss;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="253"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">bool</span> spc = <span class="hljs-literal">false</span>, end = <span class="hljs-literal">false</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="254"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> len = <span class="hljs-number">0</span>; <span class="hljs-keyword">bool</span> isdbcs = <span class="hljs-literal">false</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="255"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">char</span>&amp; i : str) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="256"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            isdbcs = !isdbcs &amp;&amp; i &lt; <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="257"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (isdbcs &amp;&amp; (!end &amp;&amp; len + <span class="hljs-number">1</span> == maxl))</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="258"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            { ss.push_back(<span class="hljs-string">' '</span>); ++ len;    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="259"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isdbcs &amp;&amp; (end &amp;&amp; len + <span class="hljs-number">4</span> == maxl))</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="260"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            { ss.push_back(<span class="hljs-string">' '</span>); <span class="hljs-keyword">continue</span>;  }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="261"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (len &gt;= maxl) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="262"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (end) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="263"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = len; j &amp;&amp; j != len - <span class="hljs-number">3</span>; --j)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="264"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                        ss[<span class="hljs-keyword">unsigned</span>(j)] = <span class="hljs-string">'.'</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="265"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="266"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="267"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                ss.push_back(<span class="hljs-string">'\n'</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="268"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                end = <span class="hljs-literal">true</span>; maxl &lt;&lt;= <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="269"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="270"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (i == <span class="hljs-string">' '</span> || i == <span class="hljs-string">'\t'</span> || i == <span class="hljs-string">'\n'</span> || i == <span class="hljs-string">'\r'</span>) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="271"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (!spc)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="272"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    ss.push_back(<span class="hljs-string">'`'</span>), spc = <span class="hljs-literal">true</span>, ++len;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="273"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">continue</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="274"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="275"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            ss.push_back(i), spc = <span class="hljs-literal">false</span>, ++len;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="276"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="277"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="278"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">font_t</span> ft(<span class="hljs-string">"宋体"</span>, { TW, TW &lt;&lt; <span class="hljs-number">1</span> });</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="279"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">surface_t</span> s = ft.render(ss.c_str(), <span class="hljs-literal">false</span>, <span class="hljs-number">0xff000000</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="280"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().blit(s, {boxrc.x, boxrc.y}, <span class="hljs-number">0</span>, blend.Alpha_rgba);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="281"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="282"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">rect_t</span> rc2 = { boxrc.x + boxrc.w - (TW * <span class="hljs-number">3</span>), boxrc.y + TW + <span class="hljs-number">1</span>, TW &lt;&lt; <span class="hljs-number">1</span>, TW &lt;&lt; <span class="hljs-number">1</span> };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="283"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> ret2 = (ms.x &gt;= rc2.x &amp;&amp; ms.y &gt; rc2.y &amp;&amp; ms.x &lt;= rc2.x + rc2.w &amp;&amp; ms.y &lt;= rc2.y + rc2.h) ? <span class="hljs-number">2</span> : ret;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="284"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">font_t</span> ft2(<span class="hljs-string">"宋体"</span>, { TW, TW &lt;&lt; <span class="hljs-number">1</span> });</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="285"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        s = ft2.render(<span class="hljs-string">"×"</span>, <span class="hljs-literal">false</span>, ret2 == <span class="hljs-number">2</span> ? lightblue : (ret ? <span class="hljs-number">0xff000000</span> : <span class="hljs-number">0xff444444</span>), rgba(<span class="hljs-number">255</span>, <span class="hljs-number">100</span>, <span class="hljs-number">66</span>, <span class="hljs-number">166</span>));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="286"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().blit(s, {rc2.x, rc2.y}, <span class="hljs-number">0</span>, blend.Alpha_rgba);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="287"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="288"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">rect_t</span> rc3 = { boxrc.x + boxrc.w - (TW * <span class="hljs-number">9</span>), boxrc.y + TW + <span class="hljs-number">1</span>, TW * <span class="hljs-number">5</span>, TW &lt;&lt; <span class="hljs-number">1</span> };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="289"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> ret3 = (ms.x &gt;= rc3.x &amp;&amp; ms.y &gt; rc3.y &amp;&amp; ms.x &lt;= rc3.x + rc3.w &amp;&amp; ms.y &lt;= rc3.y + rc3.h) ? <span class="hljs-number">3</span> : ret2;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="290"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">font_t</span> ft3(<span class="hljs-string">"宋体"</span>, { TW, TW &lt;&lt; <span class="hljs-number">1</span> });</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="291"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        s = ft3.render(<span class="hljs-string">" Mod "</span>, <span class="hljs-literal">false</span>, ret3 == <span class="hljs-number">3</span> ? lightblue : (ret ? <span class="hljs-number">0xff000000</span> : <span class="hljs-number">0xff444444</span>), rgba(<span class="hljs-number">255</span>, <span class="hljs-number">100</span>, <span class="hljs-number">66</span>, <span class="hljs-number">166</span>));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="292"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().blit(s, { rc3.x, rc3.y }, <span class="hljs-number">0</span>, blend.Alpha_rgba);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="293"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> ret3;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="294"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="295"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="296"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">print_title</span><span class="hljs-params">()</span> </span>{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="297"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">point2d_t</span> ps = display.get_window_size();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="298"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">point2d_t</span> ms = mouse.get_pos();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="299"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().fill(rgba(<span class="hljs-number">255</span>, <span class="hljs-number">222</span>, <span class="hljs-number">222</span>, <span class="hljs-number">255</span>), { <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, ps.x, sys.sy - <span class="hljs-number">2</span> });</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="300"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="301"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">font_t</span> ft(<span class="hljs-string">"宋体"</span>, { TW - <span class="hljs-number">2</span>, (TW - <span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-number">1</span> }, <span class="hljs-literal">true</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="302"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">surface_t</span> s = ft.render(<span class="hljs-string">"剪切板"</span>, <span class="hljs-literal">false</span>, <span class="hljs-number">0xff000000</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="303"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().blit(s, { TW + <span class="hljs-number">1</span>, TW * <span class="hljs-number">2</span> / <span class="hljs-number">3</span> }, <span class="hljs-number">0</span>, blend.Alpha_rgba);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="304"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="305"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-built_in">string</span> st;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="306"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-built_in">stringstream</span> ss;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="307"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ss &lt;&lt; <span class="hljs-string">'('</span> &lt;&lt; sys._len &lt;&lt; <span class="hljs-string">'/'</span> &lt;&lt; sys.MX &lt;&lt; <span class="hljs-string">')'</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="308"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ss &gt;&gt; st;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="309"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="310"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">font_t</span> ft2(<span class="hljs-string">"宋体"</span>, { TW - <span class="hljs-number">2</span>, (TW - <span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-number">1</span> });</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="311"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        s = ft2.render(st.c_str(), <span class="hljs-literal">false</span>, <span class="hljs-number">0xff777777</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="312"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().blit(s, { TW + (TW * <span class="hljs-number">6</span>), TW * <span class="hljs-number">2</span> / <span class="hljs-number">3</span> }, <span class="hljs-number">0</span>, blend.Alpha_rgba);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="313"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="314"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">rect_t</span> rc = { ps.x - TW - <span class="hljs-number">1</span> - (TW &lt;&lt; <span class="hljs-number">2</span>), TW * <span class="hljs-number">2</span> / <span class="hljs-number">3</span>, (TW - <span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-number">2</span>, (TW - <span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-number">1</span> };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="315"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">font_t</span> ft3(<span class="hljs-string">"宋体"</span>, { TW - <span class="hljs-number">1</span>, (TW - <span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-number">1</span> }, <span class="hljs-literal">true</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="316"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> ret = (ms.x &gt;= rc.x &amp;&amp; ms.y &gt; rc.y &amp;&amp; ms.x &lt;= rc.x + rc.w &amp;&amp; ms.y &lt;= rc.y + rc.h) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="317"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        s = ft3.render(<span class="hljs-string">"清空"</span>, <span class="hljs-literal">false</span>, ret ? aliceblue : <span class="hljs-number">0xff6994a2</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="318"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().blit(s, {rc.x, rc.y}, <span class="hljs-number">0</span>, blend.Alpha_rgba);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="319"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="320"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">rect_t</span> rc2 = { ps.x - TW - <span class="hljs-number">1</span> - (TW &lt;&lt; <span class="hljs-number">3</span>) - TW, TW * <span class="hljs-number">2</span> / <span class="hljs-number">3</span>, (TW - <span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-number">2</span>, (TW - <span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-number">1</span>};</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="321"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">font_t</span> ft4(<span class="hljs-string">"宋体"</span>, { TW - <span class="hljs-number">1</span>, (TW - <span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-number">1</span> }, <span class="hljs-literal">true</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="322"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">int</span> ret2 = (ms.x &gt;= rc2.x &amp;&amp; ms.y &gt; rc2.y &amp;&amp; ms.x &lt;= rc2.x + rc2.w &amp;&amp; ms.y &lt;= rc2.y + rc2.h) ? <span class="hljs-number">2</span> : ret;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="323"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        s = ft4.render(<span class="hljs-string">"搜索"</span>, <span class="hljs-literal">false</span>, ret2 == <span class="hljs-number">2</span> ? aliceblue : <span class="hljs-number">0xff6994a2</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="324"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        display.get_surface().blit(s, {rc2.x, rc2.y}, <span class="hljs-number">0</span>, blend.Alpha_rgba);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="325"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="326"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> ret2;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="327"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="328"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="329"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">algo_lwst</span><span class="hljs-params">(wstring&amp; a, wstring b)</span></span>{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="330"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">size_t</span> n = a.length(), m = b.length();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="331"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; arr(n, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;(m));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="332"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">auto</span> fc = [](<span class="hljs-keyword">wchar_t</span> c) {<span class="hljs-keyword">return</span> c &gt;= <span class="hljs-string">'A'</span> &amp;&amp; c &lt;= <span class="hljs-string">'Z'</span> ? c - <span class="hljs-string">'A'</span> + <span class="hljs-string">'a'</span> : c; };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="333"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="334"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i != n; ++ i) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="335"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (fc(b[<span class="hljs-number">0</span>]) == fc(a[i])) arr[i][<span class="hljs-number">0</span>] = <span class="hljs-keyword">int</span>(i);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="336"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) arr[i][<span class="hljs-number">0</span>] = arr[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="337"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> arr[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="338"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="339"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> j = <span class="hljs-number">0</span>; j != m; ++ j) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="340"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (fc(a[<span class="hljs-number">0</span>]) == fc(b[j])) arr[<span class="hljs-number">0</span>][j] = <span class="hljs-keyword">int</span>(j);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="341"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j &gt; <span class="hljs-number">0</span>) arr[<span class="hljs-number">0</span>][j] = arr[<span class="hljs-number">0</span>][j<span class="hljs-number">-1</span>] + <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="342"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> arr[<span class="hljs-number">0</span>][j] = <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="343"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="344"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">1</span>; i != n; ++i)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="345"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> j = <span class="hljs-number">1</span>; j != m; ++j) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="346"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (fc(a[i]) == fc(b[j])) arr[i][j] = min(arr[i<span class="hljs-number">-1</span>][j]+<span class="hljs-number">1</span>, min(arr[i][j<span class="hljs-number">-1</span>]+<span class="hljs-number">1</span>, arr[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="347"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">else</span> arr[i][j] = min(arr[i<span class="hljs-number">-1</span>][j]+<span class="hljs-number">1</span>, min(arr[i][j<span class="hljs-number">-1</span>]+<span class="hljs-number">1</span>, arr[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]+<span class="hljs-number">1</span>));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="348"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="349"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">double</span> ret = <span class="hljs-built_in">pow</span>(<span class="hljs-number">.5</span>, <span class="hljs-keyword">double</span>(arr[n - <span class="hljs-number">1</span>][m - <span class="hljs-number">1</span>]));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="350"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i != n; ++ i) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="351"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (fc(a[i]) == fc(b[<span class="hljs-number">0</span>])) arr[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="352"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i != <span class="hljs-number">0</span>) arr[i][<span class="hljs-number">0</span>] = arr[i<span class="hljs-number">-1</span>][<span class="hljs-number">0</span>];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="353"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> arr[i][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="354"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="355"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> j = <span class="hljs-number">0</span>; j != m; ++ j) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="356"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (fc(a[<span class="hljs-number">0</span>]) == fc(b[j])) arr[<span class="hljs-number">0</span>][j] = <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="357"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (j) arr[<span class="hljs-number">0</span>][j] = arr[<span class="hljs-number">0</span>][j<span class="hljs-number">-1</span>];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="358"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">else</span> arr[<span class="hljs-number">0</span>][j] = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="359"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="360"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">1</span>; i != n; ++ i)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="361"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> j = <span class="hljs-number">1</span>; j != m; ++ j) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="362"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">if</span> (fc(a[i]) == fc(b[j])) arr[i][j] = max(max(arr[i][j<span class="hljs-number">-1</span>], arr[i<span class="hljs-number">-1</span>][j]), arr[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]+<span class="hljs-number">1</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="363"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">else</span> arr[i][j] = max(max(arr[i][j<span class="hljs-number">-1</span>], arr[i<span class="hljs-number">-1</span>][j]), arr[i<span class="hljs-number">-1</span>][j<span class="hljs-number">-1</span>]);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="364"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="365"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ret += <span class="hljs-keyword">double</span>(arr[n - <span class="hljs-number">1</span>][m - <span class="hljs-number">1</span>]);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="366"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> ret;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="367"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="368"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="369"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">paste</span><span class="hljs-params">(<span class="hljs-built_in">std</span>::wstring &amp;str)</span> </span>{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="370"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">size_t</span> len = str.length(), i = <span class="hljs-number">0</span>, idx = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="371"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (len == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="372"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;INPUT&gt; in(len &lt;&lt; <span class="hljs-number">1</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="373"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ZeroMemory(&amp;in[<span class="hljs-number">0</span>], in.size() * <span class="hljs-keyword">sizeof</span>(INPUT));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="374"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">while</span> (i != len) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="375"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            WORD ch = <span class="hljs-keyword">static_cast</span>&lt;WORD&gt;(str[i++]);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="376"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (ch == <span class="hljs-number">0x000A</span>) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="377"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].type = INPUT_KEYBOARD;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="378"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].ki.wVk = VK_RETURN;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="379"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].ki.dwFlags = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="380"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                ++idx;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="381"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx] = in[idx - <span class="hljs-number">1</span>];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="382"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].ki.dwFlags |= KEYEVENTF_KEYUP;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="383"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                ++idx;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="384"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">continue</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="385"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="386"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            in[idx].type = INPUT_KEYBOARD;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="387"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            in[idx].ki.wScan = ch;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="388"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            in[idx].ki.dwFlags = KEYEVENTF_UNICODE;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="389"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            ++idx;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="390"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> ((ch &lt; <span class="hljs-number">0xD800</span>) || (ch &gt; <span class="hljs-number">0xDFFF</span>)) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="391"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx] = in[idx - <span class="hljs-number">1</span>];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="392"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].ki.dwFlags |= KEYEVENTF_KEYUP;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="393"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                ++idx;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="394"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            } <span class="hljs-keyword">else</span> {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="395"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].type = INPUT_KEYBOARD;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="396"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].ki.wScan = (WORD) str[i++];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="397"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].ki.dwFlags = KEYEVENTF_UNICODE;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="398"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                ++idx;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="399"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx] = in[idx<span class="hljs-number">-2</span>];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="400"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].ki.dwFlags |= KEYEVENTF_KEYUP;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="401"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                ++idx;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="402"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx] = in[idx<span class="hljs-number">-2</span>];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="403"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                in[idx].ki.dwFlags |= KEYEVENTF_KEYUP;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="404"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                ++idx;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="405"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="406"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="407"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        SendInput(UINT(in.size()), &amp;in[<span class="hljs-number">0</span>], <span class="hljs-keyword">sizeof</span>(INPUT));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="408"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="409"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">}</div></td></tr></tbody></table></code><a class="copy-code" href="javascript:" data-clipboard-target="#hljs-2" title="拷贝代码"><i class="fa fa-clipboard" aria-hidden="true"></i></a></pre>
                      <p>另外，此程序中用到的 inputbox.h 代码如下：</p>
                      <pre class="highlight-wrap" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="false" design="by hojun"><code class="C++11 hljs" data-rel="C++" id="hljs-3"><table class="hljs-ln"><tbody><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">"mclib/src/mclib.h"</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">pragma</span> <span class="hljs-meta-keyword">warning</span>(disable: 5039)</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">define</span> WIN32_LEAN_AND_MEAN</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;windows.h&gt;</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;windowsx.h&gt;</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;tchar.h&gt;</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">undef</span> WIN32_LEAN_AND_MEAN</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-function"><span class="hljs-keyword">int</span> WINAPI <span class="hljs-title">WndProc</span><span class="hljs-params">(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)</span></span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">HINSTANCE _hInstance;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">char</span>* _lpWndMsg, * _lpDefValue, * _lpHelpFile;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">TCHAR* _lpWndTitle;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">int</span> _nHelpIndex;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">HWND _hParent, _hDesktop, _hEdit, _hBtnOk, _hBtnCancel, _hBtnHelp, _hMsgText;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">RECT _st_rcDesktop, _st_rcWnd;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">HFONT _hWndFont;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">char</span> _lpwfn[] = <span class="hljs-string">"Arial"</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">char</span> *_lpWndFontName = (<span class="hljs-keyword">char</span>*)_lpwfn;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">char</span>* _szBuffer = <span class="hljs-number">0</span>; LRESULT lgt = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">UINT _nMaxLine = <span class="hljs-number">2048</span><span class="hljs-number">-1</span>, _nEditStyle = WS_BORDER | WS_CHILD | WS_VISIBLE | ES_AUTOVSCROLL | ES_MULTILINE | SS_LEFT; <span class="hljs-comment">/* ES_AUTOHSCROLL */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-function"><span class="hljs-keyword">int</span> WINAPI <span class="hljs-title">WndProc</span><span class="hljs-params">(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)</span> </span>{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    HDC hWndDc;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="24"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    WORD uBtnID;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="25"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    LRESULT lpm = <span class="hljs-number">12</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="26"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">switch</span> (uMsg) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="27"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">case</span> WM_DESTROY:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="28"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (_hWndFont) DeleteObject(_hWndFont);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="29"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        PostQuitMessage(<span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="30"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="31"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">case</span> WM_CREATE:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="32"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _hMsgText = CreateWindowExA(<span class="hljs-number">0</span>, <span class="hljs-string">"Static"</span>, _lpWndMsg, WS_CHILD | WS_VISIBLE,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="33"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">275</span>, <span class="hljs-number">70</span>, hWnd, (HMENU)<span class="hljs-number">1000</span>, _hInstance, <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="34"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _hBtnOk = CreateWindowExA(<span class="hljs-number">0</span>, (<span class="hljs-string">"Button"</span>), (<span class="hljs-string">"确定(&amp;K)"</span>),</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="35"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            WS_CHILD | WS_VISIBLE | BS_DEFPUSHBUTTON, <span class="hljs-number">285</span>, <span class="hljs-number">5</span>, <span class="hljs-number">65</span>,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="36"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-number">20</span>, hWnd, (HMENU)IDOK, _hInstance, <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="37"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _hBtnCancel = CreateWindowExA(<span class="hljs-number">0</span>, (<span class="hljs-string">"Button"</span>), (<span class="hljs-string">"取消(&amp;C)"</span>), WS_CHILD | WS_VISIBLE,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="38"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-number">285</span>, <span class="hljs-number">30</span>, <span class="hljs-number">65</span>, <span class="hljs-number">20</span>, hWnd, (HMENU)IDCANCEL, _hInstance, <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="39"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _hBtnHelp = CreateWindowExA(<span class="hljs-number">0</span>, (<span class="hljs-string">"Button"</span>), (<span class="hljs-string">"帮助(&amp;H)"</span>), WS_CHILD | WS_VISIBLE,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="40"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-number">285</span>, <span class="hljs-number">55</span>, <span class="hljs-number">65</span>, <span class="hljs-number">20</span>, hWnd, (HMENU)IDHELP, _hInstance, <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="41"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _hEdit = CreateWindowExA(WS_EX_CLIENTEDGE, (<span class="hljs-string">"Edit"</span>), _lpDefValue, _nEditStyle,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="42"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">275</span>, <span class="hljs-number">85</span>, hWnd, (HMENU)<span class="hljs-number">2000</span>, _hInstance, <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="43"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-comment">/* SendMessage(_hEdit, EM_SETLIMITTEXT, _nMaxLine, 0); */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="44"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        SendMessage(_hEdit, EM_SETTABSTOPS, <span class="hljs-number">1</span>, LPARAM(&amp;lpm));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="45"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="46"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _hWndFont = CreateFontA(<span class="hljs-number">12</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">12</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, GB2312_CHARSET,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="47"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="48"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            DEFAULT_PITCH, _lpWndFontName);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="49"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (!lstrlenA(_lpHelpFile))</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="50"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            ShowWindow(_hBtnHelp, SW_HIDE);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="51"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        hWndDc = GetDC(hWnd);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="52"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        SelectObject(hWndDc, _hWndFont);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="53"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ReleaseDC(hWnd, hWndDc);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="54"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        SendDlgItemMessageA(hWnd, <span class="hljs-number">1000</span>, WM_SETFONT, WPARAM(_hWndFont), <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="55"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        SendDlgItemMessageA(hWnd, <span class="hljs-number">2000</span>, WM_SETFONT, WPARAM(_hWndFont), <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="56"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        SendDlgItemMessageA(hWnd, IDOK, WM_SETFONT, WPARAM(_hWndFont), <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="57"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        SendDlgItemMessageA(hWnd, IDCANCEL, WM_SETFONT, WPARAM(_hWndFont), <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="58"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        SendDlgItemMessageA(hWnd, IDHELP, WM_SETFONT, WPARAM(_hWndFont), <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="59"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="60"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">case</span> WM_SIZE: <span class="hljs-comment">/*  365,130-&gt;285,30 */</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="61"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ::SetWindowPos(_hBtnOk, <span class="hljs-number">0</span>, GET_X_LPARAM(lParam) - <span class="hljs-number">70</span>, <span class="hljs-number">5</span>, <span class="hljs-number">65</span>, <span class="hljs-number">20</span>, SWP_FRAMECHANGED);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="62"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ::SetWindowPos(_hBtnCancel, <span class="hljs-number">0</span>, GET_X_LPARAM(lParam) - <span class="hljs-number">70</span>, <span class="hljs-number">30</span>, <span class="hljs-number">65</span>, <span class="hljs-number">20</span>, SWP_FRAMECHANGED);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="63"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ::SetWindowPos(_hBtnHelp, <span class="hljs-number">0</span>, GET_X_LPARAM(lParam) - <span class="hljs-number">70</span>, <span class="hljs-number">55</span>, <span class="hljs-number">65</span>, <span class="hljs-number">20</span>, SWP_FRAMECHANGED);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="64"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ::SetWindowPos(_hMsgText, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>,<span class="hljs-number">1</span>, SWP_FRAMECHANGED);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="65"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        ::SetWindowPos(_hEdit, <span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, GET_X_LPARAM(lParam) - <span class="hljs-number">85</span>, GET_Y_LPARAM(lParam)<span class="hljs-number">-10</span>, <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="66"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="67"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">case</span> WM_KEYDOWN:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="68"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (wParam == VK_RETURN)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="69"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            SendMessage(hWnd, WM_COMMAND, IDOK, <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="70"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="71"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">case</span> WM_SETFOCUS:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="72"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        SetFocus(_hEdit);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="73"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="74"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">case</span> WM_COMMAND:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="75"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        uBtnID = LOWORD(wParam);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="76"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">switch</span> (uBtnID) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="77"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">case</span> IDOK:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="78"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            lpm = SendMessage(_hEdit, WM_GETTEXTLENGTH, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) + <span class="hljs-number">10</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="79"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (lgt &lt; lpm) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="80"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                lgt = lpm;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="81"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                <span class="hljs-keyword">delete</span>[] _szBuffer;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="82"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                _szBuffer = <span class="hljs-keyword">new</span>(<span class="hljs-built_in">std</span>::nothrow) <span class="hljs-keyword">char</span>[<span class="hljs-keyword">size_t</span>(lgt)];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="83"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="84"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (_szBuffer)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="85"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                GetDlgItemTextA(hWnd, <span class="hljs-number">2000</span>, _szBuffer, <span class="hljs-keyword">int</span>(lgt));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="86"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="87"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            DestroyWindow(hWnd);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="88"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="89"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">case</span> IDCANCEL:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="90"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            DestroyWindow(hWnd);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="91"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="92"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">case</span> IDHELP:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="93"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            WinHelpA(hWnd, _lpHelpFile, HELP_INDEX, ULONG_PTR(_nHelpIndex));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="94"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="95"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        };</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="96"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">break</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="97"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">default</span>:</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="98"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">int</span>(DefWindowProc(hWnd, uMsg, wParam, lParam));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="99"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="100"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="101"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">}</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="102"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-function"><span class="hljs-keyword">char</span>* <span class="hljs-title">input_box</span><span class="hljs-params">(<span class="hljs-keyword">char</span>* lpWndMsg = <span class="hljs-literal">NULL</span>, TCHAR* lpWndTitle = <span class="hljs-literal">NULL</span>,</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="103"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">char</span>* lpDefValue = <span class="hljs-literal">NULL</span>,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="104"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">int</span> xPos = <span class="hljs-number">0</span>, <span class="hljs-keyword">int</span> yPos = <span class="hljs-number">0</span>, <span class="hljs-keyword">int</span> fIsType = <span class="hljs-number">0</span>,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="105"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">char</span>* lpHelpFile = <span class="hljs-literal">NULL</span>, <span class="hljs-keyword">int</span> nHelpIndex = <span class="hljs-number">0</span>)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="106"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="107"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!_szBuffer) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="108"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _szBuffer = <span class="hljs-keyword">new</span>(nothrow) <span class="hljs-keyword">char</span>[<span class="hljs-number">1</span>];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="109"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        lgt = <span class="hljs-number">1</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="110"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="111"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (_szBuffer)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="112"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        _szBuffer[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="113"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    _hParent = mcl::display.get_wm_info()[<span class="hljs-string">"window"</span>];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="114"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    _lpWndMsg = lpWndMsg;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="115"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    _lpWndTitle = lpWndTitle;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="116"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    _lpDefValue = lpDefValue;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="117"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    _lpHelpFile = lpHelpFile;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="118"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    _nHelpIndex = nHelpIndex;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="119"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (fIsType) _nEditStyle |= fIsType;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="120"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    _hInstance = GetModuleHandle(<span class="hljs-literal">NULL</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="121"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    _hDesktop = GetDesktopWindow();</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="122"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    GetWindowRect(_hDesktop, &amp;_st_rcDesktop);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="123"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!xPos) xPos = (_st_rcDesktop.right - <span class="hljs-number">365</span>) / <span class="hljs-number">2</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="124"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!yPos) yPos = (_st_rcDesktop.bottom - <span class="hljs-number">130</span>) / <span class="hljs-number">2</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="125"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    WNDCLASSEX st_WndClass;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="126"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    HWND hWnd;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="127"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    RtlZeroMemory(&amp;st_WndClass, <span class="hljs-keyword">sizeof</span>(st_WndClass));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="128"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    st_WndClass.cbSize = <span class="hljs-keyword">sizeof</span>(st_WndClass);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="129"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    st_WndClass.hInstance = _hInstance;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="130"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    st_WndClass.hbrBackground = (HBRUSH)COLOR_BTNSHADOW;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="131"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    st_WndClass.hCursor = LoadCursor(<span class="hljs-number">0</span>, IDC_ARROW);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="132"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    st_WndClass.hIcon = LoadIcon(<span class="hljs-number">0</span>, IDI_APPLICATION);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="133"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    st_WndClass.hIconSm = st_WndClass.hIcon;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="134"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="135"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">pragma</span> <span class="hljs-meta-keyword">warning</span>(push)</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="136"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">pragma</span> <span class="hljs-meta-keyword">warning</span>(disable: 4191)</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="137"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    st_WndClass.lpfnWndProc = <span class="hljs-keyword">reinterpret_cast</span>&lt;WNDPROC&gt;(&amp;WndProc);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="138"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-meta"># <span class="hljs-meta-keyword">pragma</span> <span class="hljs-meta-keyword">warning</span>(pop)</span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="139"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    st_WndClass.lpszClassName = _T(<span class="hljs-string">"InputBox_Class"</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="140"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    st_WndClass.style = CS_HREDRAW | CS_VREDRAW;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="141"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    RegisterClassEx(&amp;st_WndClass);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="142"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    hWnd = CreateWindowEx(<span class="hljs-number">0</span>, _T(<span class="hljs-string">"InputBox_Class"</span>), _lpWndTitle,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="143"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        WS_DLGFRAME | WS_SYSMENU | WS_VISIBLE | WS_THICKFRAME, xPos, yPos,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="144"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-number">365</span>, <span class="hljs-number">130</span>, _hParent, <span class="hljs-number">0</span>, _hInstance, <span class="hljs-number">0</span>);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="145"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    MSG st_Msg;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="146"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!hWnd) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="147"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    ShowWindow(hWnd, SW_SHOW);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="148"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    UpdateWindow(hWnd);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="149"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">while</span> (GetMessage(&amp;st_Msg, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="150"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        <span class="hljs-keyword">if</span> (st_Msg.message == WM_KEYDOWN)</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="151"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> ((st_Msg.wParam == VK_RETURN) &amp;&amp; (::GetAsyncKeyState(VK_CONTROL) &amp; <span class="hljs-number">0x8000</span>))</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="152"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                SendMessage(hWnd, st_Msg.message, st_Msg.wParam, LPARAM(st_Msg.wParam));</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="153"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        TranslateMessage(&amp;st_Msg);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="154"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        DispatchMessage(&amp;st_Msg);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="155"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="156"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> _szBuffer;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="157"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">}</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="158"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"> </div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="159"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">MessageBoxCentered</span><span class="hljs-params">(HWND hWnd, LPCTSTR lpText, LPCTSTR lpCaption, UINT uType)</span></span></div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="160"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">{</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="161"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!hWnd) hWnd = display.get_wm_info()[<span class="hljs-string">"window"</span>];</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="162"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">static</span> HHOOK hHookCBT{};</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="163"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    hHookCBT = SetWindowsHookEx(WH_CBT,</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="164"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        [](<span class="hljs-keyword">int</span> nCode, WPARAM wParam, LPARAM lParam) -&gt; LRESULT {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="165"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">if</span> (nCode == HCBT_CREATEWND &amp;&amp; (LPCBT_CREATEWND(lParam))-&gt;lpcs-&gt;lpszClass == <span class="hljs-keyword">reinterpret_cast</span>&lt;LPTSTR&gt;(ATOM(<span class="hljs-number">32770</span>))) {</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="166"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    RECT rcParent{};</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="167"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    GetWindowRect(((LPCBT_CREATEWND)lParam)-&gt;lpcs-&gt;hwndParent, &amp;rcParent);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="168"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    ((LPCBT_CREATEWND)lParam)-&gt;lpcs-&gt;x = rcParent.left + ((rcParent.right - rcParent.left) - ((LPCBT_CREATEWND)lParam)-&gt;lpcs-&gt;cx) / <span class="hljs-number">2</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="169"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">                    ((LPCBT_CREATEWND)lParam)-&gt;lpcs-&gt;y = rcParent.top + ((rcParent.bottom - rcParent.top) - ((LPCBT_CREATEWND)lParam)-&gt;lpcs-&gt;cy) / <span class="hljs-number">2</span>;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="170"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            }</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="171"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">            <span class="hljs-keyword">return</span> CallNextHookEx(hHookCBT, nCode, wParam, lParam);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="172"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">        }, <span class="hljs-number">0</span>, GetCurrentThreadId()</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="173"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    );</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="174"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">int</span> iRet = MessageBox(hWnd, lpText, lpCaption, uType);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="175"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    UnhookWindowsHookEx(hHookCBT);</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="176"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> iRet;</div></td></tr><tr><td class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="177"></div></td><td class="hljs-ln-code"><div class="hljs-ln-line">}</div></td></tr></tbody></table></code><a class="copy-code" href="javascript:" data-clipboard-target="#hljs-3" title="拷贝代码"><i class="fa fa-clipboard" aria-hidden="true"></i></a></pre>
                            <!-- end of article.md -->
                            </div>
                            <div style="text-align:center;width:100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
                            <footer class="post-footer">
                                <div class="post-lincenses">
                                    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow">
                                        <i class="fa fa-creative-commons" aria-hidden="true"></i>
                                        知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议
                                    </a>
                                </div>
                                <div class="post-tags"></div>
                                <div class="post-share">
                                    <div class="social-share sharehidden share-component"></div>
                                    <i class="iconfont show-share icon-forward"></i>
                                </div>
                            </footer>
                        </article>
                        <div class="toc" style="background:0 0"></div>
                        <section class="post-squares nextprev">
                            <div class="post-nepre full previous">
                                <a href="./202204011546.html" rel="prev">
                                    <div class="background">
                                        <img class="lazyload" src="../../index/wp-content/work/images/global/lazyload1.webp" data-src="../../index/wp-content/work/images/post/202204011546.webp" style="width:100%;height:100%;object-fit:cover;pointer-events:none" onerror="imgError(this,3)" src="../../index/wp-content/work/images/post/202204011546.webp">
                                    </div>
                                    <span class="label">Previous Post</span>
                                    <div class="info">
                                        <h3>如何将本地项目同时上传到 Github/Gitee 并使用 GPG 验证</h3>
                                        <hr>
                                    </div>
                                </a>
                            </div>
                        </section>
                        <div id="vcomments"></div>
                        <script data-cfasync="false" src="../../index/wp-includes/work/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
                        <script>
                            window.onload = function() {
                                (new Valine).init({
                                    el: "#vcomments",
                                    appId: "Hr0x4YCmviK0H7WMFGDa2bbb-gzGzoHsz",
                                    appKey: "Woqnw7ir7fohwvS8uk0MKDMP",
                                    enableQQ: "true",
                                    serverURLs: "https://hr0x4ycm.lc-cn-n1-shared.com",
                                    recordIP: "true",
                                    requiredFields: ["nick", "mail"],
                                    path: window.location.pathname,
                                    placeholder: "好期待！猜你一定有什么想对雨雪说的呢！\n支持MarkDown语法，邮箱填QQ邮箱可使用QQ头像哦！",
                                    visitor: true
                                })
                            }
                        </script>
                        <section class="author-profile">
                            <div class="info" itemprop="author" itemscope itemtype="https://schema.org/Person">
                                <a href="https://github.com/iamyukino" target="_blank" class="profile gravatar">
                                    <img src="../../index/wp-content/work/images/global/avatar.png" target="_blank" itemprop="image" alt="雨宮雪乃" height="70" width="70">
                                </a>
                                <div class="meta">
                                    <span class="title">Author</span>
                                    <h3 itemprop="name">
                                        <a href="https://github.com/iamyukino" target="_blank" itemprop="url" rel="author">iamyukino</a>
                                    </h3>
                                </div>
                            </div>
                            <hr>
                            <p>
                                <i class="iconfont icon-write"></i>
                                关关难过关关过，前路漫漫亦灿灿。
                            </p>
                        </section>
                    </main>
                </div>
            </div>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="请输入关键词...">
                    <span class="ins-close ins-selectable">
                        <i class="fa fa-times-circle"></i>
                    </span>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
        <script>
            window.INSIGHT_CONFIG = {
                TRANSLATION: {
                    POSTS: "文章",
                    CATEGORIES: "分类",
                    TAGS: "标签"
                },
                ROOT_URL: "/",
                CONTENT_URL: "../../index/wp-content/work/content.json"
            }
        </script>
        <footer id="colophon" class="site-footer" role="contentinfo">
            <div class="site-info">
                <div class="footertext">
                    <div class="img-preload">
                        <img src="../../index/wp-content/work/images/global/loading-p.gif">
                    </div>
                    <p style="color:#666">&copy 2023 | iamYukino</p>
                </div>
                <div class="footer-device">
                    <p style="font-family:Ubuntu,sans-serif">
                        <span style="color:#b9b9b9">
                            Powered by Hexo <i class="iconfont icon-sakura rotating" style="color:pink;display:inline-block"></i>
                            Theme Sakura T
                        </span>
                    </p>
                </div>
            </div>
        </footer>
        <script type="text/javascript" src="../../index/wp-includes/work/js/lib.min.js"></script>
        <script src="../../index/wp-includes/work/js/clipboard.min.js"></script>
        <script type="text/javascript" src="../../index/wp-includes/work/js/InsightSearch.js"></script>
        <script type="text/javascript" src="../../index/wp-includes/work/js/jquery.fancybox.min.js"></script>
        <script type="text/javascript" src="../../index/wp-includes/work/js/zoom.min.js"></script>
        <script type="text/javascript" src="../../index/wp-includes/work/js/sakura-app.js"></script>
        <script type="text/javascript" src="../../index/wp-includes/work/js/tocbot.min.js"></script>
        <script type="text/javascript">
            var Poi;
            Poi = /Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent) ? {
                pjax: "1",
                movies: {
                    url: "../../index/wp-content/work/images/cover",
                    name: "miao3.mp4",
                    live: "close"
                },
                windowheight: "fixed",
                codelamp: "close",
                ajaxurl: "",
                order: "asc",
                formpostion: "bottom"
            } : {
                pjax: "1",
                movies: {
                    url: "../../index/wp-content/work/images/cover",
                    name: "miao3.mp4",
                    live: "open"
                },
                windowheight: "auto",
                codelamp: "close",
                ajaxurl: "",
                order: "asc",
                formpostion: "bottom"
            }
        </script>
        <script>
            $(document).ready(function() {
                var o;
                0 < $(".toc").length && 1200 < document.body.clientWidth && (0 < $(".pattern-center").length ? tocbot.init({
                    tocSelector: ".toc",
                    contentSelector: ".entry-content",
                    scrollSmooth: !0,
                    headingSelector: "h1, h2, h3, h4, h5",
                    headingsOffset: -400,
                    scrollSmoothOffset: -85
                }) : tocbot.init({
                    tocSelector: ".toc",
                    contentSelector: ".entry-content",
                    scrollSmooth: !0,
                    headingSelector: "h1, h2, h3, h4, h5",
                    headingsOffset: -85,
                    scrollSmoothOffset: -85
                }),
                o = $(".toc").offset().top - 95,
                window.onscroll = function() {
                    var t = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
                    o <= t ? $(".toc").addClass("toc-fixed") : $(".toc").removeClass("toc-fixed")
                }
                )
            })
        </script>
        <div class="openNav no-select" style="height:50px">
            <div class="iconflat no-select" style="width:50px;height:50px">
                <div class="icon"></div>
            </div>
            <div class="site-branding search-form-submit">
                <i class="iconfont js-toggle-search iconsearch icon-search"></i>
            </div>
        </div>
    </section>

    <div id="mo-nav">
        <div class="m-avatar">
            <img src="../../index/wp-content/work/images/global/avatar.png">
        </div>
        <p style="text-align:center;color:#333;font-weight:900;font-family:Ubuntu,sans-serif;letter-spacing:1.5px">雨宮雪乃の作業台</p>
        <p style="text-align:center;word-spacing:15px">
            <a href="https://github.com/iamyukino" target="_blank">
                <img src="../../index/wp-content/work/images/main/github.png" style="width:10%;">
            </a>
            <a href="https://gitee.com/iamyukino" target="_blank">
                <img src="../../index/wp-content/work/images/main/gitee.png" style="width:10%;">
            </a>
            <a href="https://space.bilibili.com/523834694" target="_blank">
                <img src="../../index/wp-content/work/images/main/bilibili.png" style="width:10%;">
            </a>
        </p>
        <ul id="menu-new-1" class="menu">
            <li>
                <a href="https://iamyukino.github.io/">
                    <span class="faa-parent animated-hover">
                        <i class="fa fa-home faa-shake" aria-hidden="true"></i>
                        主站
                    </span>
                </a>
            </li>
            <li>
                <a href="https://iamyukino.github.io/work" class="faa-parent animated-hover">
                        <i class="fa fa-list-ul faa-vertical" aria-hidden="true"></i>
                        首页
                    </span>
                </a>
            </li>
            <li>
                <a href="https://iamyukino.github.io/work/archives">
                    <span class="faa-parent animated-hover">
                        <i class="fa fa-archive faa-shake" aria-hidden="true"></i>
                        归档
                    </span>
                </a>
                <ul class="sub-menu">
                    <li>
                        <a href="https://iamyukino.github.io/work/categories/tool">
                            <i class="fa fa-codepen" aria-hidden="true"></i>
                            工具
                        </a>
                    </li>
                    <li>
                        <a href="https://iamyukino.github.io/work/categories/misc">
                            <i class="fa fa-comment-o" aria-hidden="true"></i>
                            教程
                        </a>
                    </li>
                    <li>
                        <a href="https://iamyukino.github.io/work/blog/essay">
                            <i class="fa fa-sticky-note-o" aria-hidden="true"></i>
                            随笔
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href=javascript:;>
                    <span class="faa-parent animated-hover">
                        <i class="fa fa-gamepad faa-shake" aria-hidden="true"></i>
                        游戏
                    </span>
                </a>
                <ul class="sub-menu">
                    <li>
                        <a href="https://iamyukino.github.io/work/game/chat-noir">
                            <i class="fa fa-music" aria-hidden="true"></i>
                            猫捕
                        </a>
                    </li>
                    <li>
                        <a href="https://iamyukino.github.io/work/game/leaves-in-wind">
                            <i class="fa fa-music" aria-hidden="true"></i>
                            風切
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="https://iamyukino.github.io/work/comment">
                    <span class="faa-parent animated-hover">
                        <i class="fa fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                        留言板
                    </span>
                </a>
            </li>
        </ul>
        <p style="text-align:center;font-size:13px;color:#b9b9b9">&copy 2023 iamYukino</p>
    </div>
    <button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display:none">
        <i class="fa fa-chevron-up" aria-hidden="true"></i>
    </button>
    <link rel="stylesheet" href="../../index/wp-includes/work/npm/aplayer/dist/APlayer.min.css">
    <script src="../../index/wp-includes/work/npm/aplayer/dist/APlayer.min.js"></script>
    <script src="../../index/wp-includes/work/npm/meting@2/dist/Meting.min.js"></script>
    <style>
        .aplayer .aplayer-lrc {
            height: 35px
        }

        .aplayer .aplayer-lrc p {
            font-size: 16px;
            font-weight: 700;
            line-height: 18px!important
        }

        .aplayer .aplayer-lrc p.aplayer-lrc-current {
            color: #ff1493
        }

        .aplayer.aplayer-narrow .aplayer-body {
            left: -66px!important
        }

        .aplayer.aplayer-fixed .aplayer-lrc {
            display: none
        }

        .aplayer .aplayer-lrc.aplayer-lrc-hide {
            display: none!important
        }

        .aplayer.aplayer-fixed .lrc-show {
            display: block;
            background: rgba(255,255,255,.8)
        }
    </style>
    <meting-js id="2608803683" server="tencent" type="playlist" fixed="true" autoplay loop order="random" preload="none" volume="0.2" mutex="true"></meting-js>
    <script>
        $(function() {
            $("body").on("click", ".aplayer", function() {
                $(".aplayer-button").hasClass("aplayer-play") ? $(".aplayer-lrc").removeClass("lrc-show") : $(".aplayer-lrc").addClass("lrc-show")
            })
        })
    </script>
    <canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas>
    <script type="text/javascript" src="../../index/wp-includes/work/js/anime.min.js" async></script>
    <script type="text/javascript" src="../../index/wp-includes/work/js/mouse-click-n-tag.js" async></script>
    <script src="../../index/wp-includes/work/js/fly-engine.js" type="module" async></script>
    
    <!-- live2d -->
    <div class="waifu" style="z-index:9;">
        <div class="waifu-tips"></div>
        <canvas id="live2d" width="280" height="250" style="bottom: -10px;"></canvas>
        <div class="waifu-tool">
            <span class="fui-home"></span>
            <span class="fui-chat"></span>
            <span class="fui-eye"></span>
            <span class="fui-user"></span>
            <span class="fui-photo"></span>
            <span class="fui-info-circle"></span>
            <span class="fui-cross"></span>
        </div>
    </div>
    <!-- Live2DCubismCore script -->
    <script src="../../index/wp-includes/global/waifu/Core/live2dcubismcore.js"></script>
    <!-- Build script -->
    <script src = "../../index/wp-includes/global/waifu/Samples/TypeScript/Demo/dist/meidou_live2d.js"></script>
    <script src="../../index/wp-includes/global/waifu/Samples/TypeScript/Demo/live2d/assets/waifu-tips.js"></script>
    <script type="text/javascript">    
        let modulesPath = "../../index/wp-content/global/waifu/"
        let modelNames = ['TaoHua', 'mia1', 'live2d_free1.1', 'Orangesweet2.1', 'Hiyori']
        let waifuTipsUrl = "../../index/wp-includes/global/waifu/Samples/TypeScript/Demo/live2d/assets/waifu-tips.json"
        initModel(modulesPath, modelNames, waifuTipsUrl);
    </script>

</body>
</html>
